# Admin Operations

アプリ管理者（role: admin）が行う作業一覧。

## 初期セットアップ

| 作業 | 説明 | 手段 |
|------|------|------|
| 初期管理者登録 | 最初のadminユーザーを作成 | `create-admin`コマンド |
| 環境変数設定 | Firebase, AWS, Stripe等の設定 | .env |
| Stripeプラン作成 | PremiumプランのPrice作成 | Stripeダッシュボード |
| Webhook設定 | Stripe Webhookエンドポイント登録 | Stripeダッシュボード |

## 日常運用

### ユーザー管理
| 作業 | 頻度 | 手段 |
|------|------|------|
| ユーザー一覧確認 | 随時 | /admin/users |
| ユーザーロール変更 | 随時 | /admin/users |
| ユーザー削除 | 随時 | /admin/users |
| サブスク状況確認 | 随時 | /admin/users（拡張予定） |

### サブスクリプション管理
| 作業 | 頻度 | 手段 |
|------|------|------|
| 売上確認 | 月次 | Stripeダッシュボード |
| 解約率確認 | 月次 | Stripeダッシュボード |
| 支払い失敗ユーザー確認 | 随時 | Stripeダッシュボード / 管理画面 |
| 手動プラン変更 | サポート時 | Stripeダッシュボード |
| 返金対応 | サポート時 | Stripeダッシュボード |
| クーポン作成 | キャンペーン時 | Stripeダッシュボード |

### システム監視
| 作業 | 頻度 | 手段 |
|------|------|------|
| ヘルスチェック確認 | 随時 | GET /health |
| エラーログ確認 | 随時 | サーバーログ / 監視ツール |
| DBバックアップ確認 | 月次 | Railway |

## 管理画面（/admin）

### 現在実装済み
- `/admin/users` - ユーザー一覧・管理

### 今後追加予定
- `/admin/users` 拡張 - サブスク状況表示
- `/admin/subscriptions` - サブスク一覧・統計
- `/admin/reports` - 売上レポート

## 権限

| ロール | 説明 |
|--------|------|
| **admin** | システム管理者。全ユーザー管理可能。 |
| **member** | 一般ユーザー。自分のグループのみ操作可能。 |

※ グループ内の権限（manager/member）とは別

## 注意事項

- adminユーザーは環境変数やコマンドでのみ作成可能（UIからは作成不可）
- Stripeでの直接操作はWebhookでDBに反映される
- ユーザー削除時はStripeのサブスクもキャンセルする必要あり
